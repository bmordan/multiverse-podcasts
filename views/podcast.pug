extends layout.pug
include podcast_card.pug

block content
    .container.mb-4.podcast
        .jumbotron.mt-4.d-flex.align-items-baseline.justify-content-end.bg-primary.position-relative.card-image(style=`background-image:url('${podcast.image}');`)
            img(src='/images/mv-hero.svg' alt=podcast.title)
            a(href=`/podcasts/${podcast.id}/edit`)
                span.material-icons.icon mode
        p.lead=podcast.title
        hr.mt-4
        p=podcast.description
        ul#episodes.list-group
            if podcast.Episodes.length 
                each episode in podcast.Episodes.reverse()
                    include episode.pug
        section.my-3.d-flex
            button.btn.btn-primary(type="button" data-toggle="collapse" data-target="#add-episode-component" aria-expanded="false" aria-controls="add-episode-component") Add Episode
            a.ml-2(href="/podcasts")
                button.btn.btn-outline-secondary Back
            button#publish.btn.btn-success.ml-2(type="button" onclick=`publish("${podcast.id}");` disabled) Publish
        #add-episode-component.collapse
            .row
                .col-sm-12.col-md-8
                    section
                        form.card.card-body(onsubmit="event.preventDefault();onSubmit(this);return false;")
                            input(type="hidden" value=podcast.id name="podcast_id")
                            h2 Upload an episode
                            .mb-3
                                label.form-label(for="episode-title") Episode title
                                input#episode-title.form-control(aria-describeby="episode-title-help" name="title" required oninput="onTitle(event)")
                                #episode-title-help.form-text This will be the name of your episode.
                            .mb-3
                                label.form-label(for="episode-description") Describe your podcast this is an broad summary of the subject of your podcasts
                                textarea#episode-description.form-control(aria-describeby="episode-description-help" name="description" required style="resize:none;" oninput="onDescription(event)")
                                #episode-description-help.form-text This will be the show notes and description for your episode. Include links and other information about the episode here.
                            .mb-3
                                label.form-label(for="podcast-audio-file") Audio file of your podcast.
                                input#podcast-audio-file.form-control-file(aria-describeby="podcast-audio-file-help" name="audio" type="file" required accept="audio/mp3,audio/wav,audio/acc;capture=microphone")
                                #podcast-audio-file-help.form-text Upload your Podcast audio file (.mp3, .wav, .acc)
                            .mb-3
                                button.btn.btn-primary Upload
                .col-sm-12.col-md-4 
                    #preview.card
                        img.card-img-top(alt="podcast packshot" src=podcast.image)
                        .card-body
                            h5.card-title Your latest episode 
                            p.card-text Describe your podcast. This will appear in listeners podcast apps.
    script(src="/js/episodes.js")
